<% layout('boilerplate') -%>

<div class="container my-4">
  <h1 class="mb-4">Shop Products</h1>
  <div class="row row-cols-1 row-cols-md-3 g-4">
    <% products.forEach(product => { %>
        <% if (product.stock > 0) { %>
            <div class="col">
              <div class="card h-100">
                <img src="<%= product.image %>" class="card-img-top" alt="<%= product.title %>">
                <div class="card-body d-flex flex-column">
                  <h5 class="card-title"><%= product.title %></h5>
                  <p class="card-text flex-grow-1"><%= product.description %></p>
                  <div class="mt-auto">
                    <p class="card-text fw-bold"> &#8377; <%= product.price.toFixed(2) %></p>
                    <a href="/product/<%= product._id %>" class="btn btn-primary">Add to Cart</a>
                  </div>
                </div>
              </div>
        <% } %>
      </div>
    <% }) %>
  </div>
</div>
